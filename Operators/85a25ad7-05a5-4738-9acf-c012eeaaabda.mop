{
  "Name": "TornadoScatterCubeMap",
  "_id": "85a25ad7-05a5-4738-9acf-c012eeaaabda",
  "Namespace": "projects.calcifer.deform",
  "Description": "GPU-based scatter deform derived from StreamOutput. The Geometry is offset along a spline path defined by 2 points and 2 tangents and controlled by various parameters.",
  "Inputs": [
    {
      "Name": "Code",
      "MetaInstanceID": "2e5be305-214f-4a56-a475-31479f514ebd",
      "DefaultValue": {
        "Type": "Text",
        "Value": [
          "//>>> _parameters\r",
          "float3 StartPosition;",
          "float3 StartTangent;",
          "float3 EndPosition;",
          "float3 EndTangent;",
          "float Radius;",
          "float4 Move;",
          "float4 Converge;",
          "float4 Twirl;",
          "float4 Shrink;",
          "float4 Scatter;",
          "float4 Distort;",
          "float4 Rotate;",
          "Texture2D CubeMap;",
          "//<<< _parameters\r",
          "\r",
          "struct Vertex\r",
          "{\r",
          "    float4 pos : POSITION;\r",
          "    float3 normal : NORMAL;\r",
          "    float4 col : COLOR;\r",
          "    float2 texCoord : TEXCOORD0;\r",
          "    float3 tangent : TANGENT0;\r",
          "    float3 binormal : BINORMAL0;\r",
          "};\r",
          "\r",
          "\r",
          "float getNoise(int x, int seed)\r",
          "{\r",
          "    int n = x + seed*137;\r",
          "    n = (n << 13) ^ n;\r",
          "    return (float) (1.0 - ((n*(n*n*15731 + 789221) + 1376312589) & 0x7fffffff)/1073741824.0);\r",
          "}\r",
          "\r",
          "\r",
          "\r",
          "float3 SplinePosition( float u) \r",
          "{\r",
          "    float s1 = u*u*(3 - 2*u);  // SmoothStep\r",
          "    return (1-u) * (StartPosition + s1 * StartTangent) + u * (EndPosition+ (1-s1) * EndTangent);\r",
          "}\r",
          "\r",
          "\r",
          "float BiasedValue(float u, float aValue, float aBias, float bValue, float bBias) \r",
          "{\r",
          "    float fadeA= (float)pow(   u, pow( 0.5, -aBias));\r",
          "    float fadeB= (float)pow( 1-u, pow( 0.5, -bBias));\r",
          "    float v= fadeA * (1 - u) + u * (1-fadeB);\r",
          "    return aValue+v*(bValue-aValue);\r",
          "}\r",
          "\r",
          "\r",
          "\r",
          "Vertex VertexMain(Vertex input)\r",
          "{\r",
          "    return input;\r",
          "}\r",
          "\r",
          "\r",
          "\r",
          "[maxvertexcount(3)]\r",
          "void GeometryMain(triangle Vertex input[3], inout TriangleStream<Vertex> outputStream)\r",
          "{\r",
          "    float3 pCenter = (input[0].pos.xyz + input[1].pos.xyz + input[2].pos.xyz)/3;\r",
          "    \r",
          "    float randomSeedf= ((input[0].pos.x + input[1].pos.x + input[2].pos.x) / 3 +\r",
          "                (input[0].pos.y + input[1].pos.y + input[2].pos.y) / 3 -\r",
          "                (input[0].pos.z + input[1].pos.z + input[2].pos.z) / 3) * 100;\r",
          "    int seed = (int)randomSeedf;\r",
          "\r",
          "\r",
          "    \r",
          "    float3 direction = (pCenter-StartPosition);\r",
          "    float distance = length(direction);            \r",
          "    //float x =   clamp(( Range.y - distance) / Range.x, 0, 1);\r",
          "    \r",
          "    \r",
          "    \r",
          "    float3 offset= float3(0,0,0);\r",
          "    float ratio= distance/Radius;\r",
          "    float converge = 1;\r",
          "    float u =     BiasedValue( ratio, Move.r, Move.g, Move.b, Move.a);\r",
          "    \r",
          "    float3 pU = SplinePosition(u);\r",
          "    float3 pUD= SplinePosition(u+0.001);\r",
          "        //offset = SplinePosition(1-distance/Radius);\r",
          "        //offset = float3(0,1-distance/Radius,0)*10;\r",
          "    float3 uN = normalize(pU-pUD);  // Direction at Normal\r",
          "                \r",
          "    float4x4 transform;\r",
          "    float4x4 rotation;\r",
          "    transform=rotation= float4x4(1,0,0,0, \r",
          "                         0,1,0,0,\r",
          "                         0,0,1,0,\r",
          "                         0,0,0,1);\r",
          "    \r",
          "    bool applyDistortion = ratio < 1 && ratio> 0;\r",
          "    if(applyDistortion ) {\r",
          "        offset = pU-StartPosition;\r",
          "        converge = BiasedValue( ratio, Converge.r, Converge.g, Converge.b, Converge.a);\r",
          "    \r",
          "        float twirl = BiasedValue( ratio, Twirl.r, Twirl.g, Twirl.b, Twirl.a);\r",
          "        \r",
          "    \r",
          "        \r",
          "        //float falloff = Range.y;\r",
          "        //if (falloff == 0) {\r",
          "        //    falloff = 0.00001;\r",
          "        //}\r",
          "        //float x = clamp(- (distance - Range.x)/falloff, 0, 1);\r",
          "        \r",
          "        float influence = 0; //x*x*(3 - 2*x);  // SmoothStep\r",
          "        //float Rotate = 0;\r",
          "    \r",
          "        // Move Face to origin\r",
          "        float4x4 translateToOrigin ={ 1,    0,    0,   -pCenter.x,\r",
          "                                 0,    1,    0,   -pCenter.y,\r",
          "                                 0,    0,    1,   -pCenter.z,\r",
          "                                 0,    0,    0,   1};\r",
          "                                 \r",
          "        transform = translateToOrigin;\r",
          "    \r",
          "        // Rotate face\r",
          "        float rotateValue = BiasedValue( ratio, Rotate.r, Rotate.g, Rotate.b, Rotate.a) * getNoise(seed, 213) ; \r",
          "        float angleX= rotateValue * 3.141578 * Rotate/360 * getNoise(13, seed);\r",
          "        float cax= cos(angleX);\r",
          "        float sax= sin(angleX);    \r",
          "        float4x4 rotx = {    1,    0,    0,    0,\r",
          "                             0,    cax, -sax,  0,\r",
          "                             0,    sax,  cax,  0,\r",
          "                             0,    0,    0,    1};\r",
          "        float angleY= rotateValue * 3.141578 * Rotate/360 * getNoise(13423, seed);\r",
          "        float cay= cos(angleY);\r",
          "        float say= sin(angleY);    \r",
          "        float4x4 roty = {    cay,  0,    say,  0,\r",
          "                             0,    1,    0,    0,\r",
          "                            -say,  0,    cay,  0,\r",
          "                             0,    0,    0,    1};\r",
          "        float4x4 rotation = mul(rotx,roty);                         \r",
          "        transform = mul( rotation, transform);\r",
          "        \r",
          "        \r",
          "        // Translate to distance for twirl rotation\r",
          "        float scatter = BiasedValue( ratio, Scatter.r, Scatter.g, Scatter.b, Scatter.a) * getNoise(seed, 23) ; \r",
          "        \r",
          "        float4x4 translateTwirl={  1,    0,    0,   direction.x,\r",
          "                                 0,    1,    0,    direction.y,\r",
          "                                 0,    0,    1,    direction.z,\r",
          "                                 0,    0,    0,   1};\r",
          "        transform = mul( translateTwirl, transform);\r",
          "        \r",
          "        // Twirl as rotation around uN\r",
          "        float ca = cos(twirl);\r",
          "        float sa = sin(twirl);\r",
          "    \r",
          "        float x= uN.x;\r",
          "        float y= uN.y;\r",
          "        float z= uN.z;\r",
          "        \r",
          "        float4x4 rotateAroundUNormal= {\r",
          "            ca+x*x*(1-ca),      x*y*(1-ca)-z*sa,    x*z*(1-ca)+y*sa,    0,\r",
          "            y*x*(1-ca)+z*sa,    ca+y*y*(1-ca),      y*z*(1-ca)+x*sa,    0,\r",
          "            z*x*(1-ca)-y*sa,    z*y*(1-ca)+x*sa,    ca+z*z*(1-ca),      0,\r",
          "            0,                  0,                  0,                  1        \r",
          "        };\r",
          "        transform = mul( rotateAroundUNormal, transform);\r",
          "    \r",
          "        // Translate back\r",
          "        float4x4 translateBack={  1,    0,    0,   pCenter.x-direction.x*(1+converge+scatter),\r",
          "                                 0,    1,    0,    pCenter.y-direction.y*(1+converge+scatter),\r",
          "                                 0,    0,    1,    pCenter.z-direction.z*(1+converge+scatter),\r",
          "                                 0,    0,    0,   1};\r",
          "        transform = mul( translateBack, transform);\r",
          "    \r",
          "    \r",
          "        //float3 offset+=  normalize(direction) * influence * ( Push + getNoise(2342, seed) * Scatter );\r",
          "        // Move to u\r",
          "        float4x4 translateOffset={ 1,    0,    0,   offset.x,\r",
          "                                   0,    1,    0,   offset.y,\r",
          "                                   0,    0,    1,   offset.z, \r",
          "                                   0,    0,    0,   1};\r",
          "    \r",
          "        transform = mul( translateOffset, transform);\r",
          "    }\r",
          "\r",
          "    \r",
          "    \r",
          "\r",
          "    for (int i = 0; i < 3; i++)\r",
          "\t{\r",
          "        Vertex vertex = input[i];\r",
          "        float4 p = vertex.pos;\r",
          "        //p.xyz+= Translate;\r",
          "        \r",
          "        if(applyDistortion) \r",
          "        {\r",
          "            float shrink = BiasedValue( ratio, Shrink.r, Shrink.g, Shrink.b, Shrink.a);            \r",
          "            \r",
          "            //float shrinkScale = influence * shrink;\r",
          "            p.xyz+= (pCenter-p)*shrink;\r",
          "            \r",
          "            float pushStrength = BiasedValue( ratio, Distort.r, Distort.g, Distort.b, Distort.a) * getNoise(seed, i) ; \r",
          "            p.xyz+= direction * pushStrength  ; \r",
          "        }\r",
          "    \r",
          "        p = mul(transform, p);        \r",
          "        \r",
          "        vertex.pos.xyz = p.xyz;\r",
          "        vertex.normal = mul( float4(vertex.normal.xyz,1), transform);\r",
          "        \r",
          "        outputStream.Append(vertex);\r",
          "    }\r",
          "    outputStream.RestartStrip();\r",
          "};\r",
          "\r",
          "\r",
          "GeometryShader pGSComp = CompileShader(gs_5_0, GeometryMain());\r",
          "GeometryShader pGSwSO = ConstructGSWithSO(pGSComp, \"POSITION; NORMAL.xyz; COLOR; TEXCOORD0.xy; TANGENT0.xyz; BINORMAL0.xyz\", NULL, NULL, NULL, 0);\r",
          "\r",
          "\r",
          "technique11 Render\r",
          "{\r",
          "    pass \r",
          "    {\r",
          "        SetVertexShader(CompileShader(vs_5_0, VertexMain()));\r",
          "        SetGeometryShader(pGSwSO);\r",
          "        SetPixelShader(NULL);\r",
          "    }\r",
          "}\r",
          "\r",
          ""
        ]
      },
      "MetaID": "c522a66e-3260-4692-b3e3-79fd0361fa3d",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Scene",
      "MetaInstanceID": "a8ab677f-1795-474e-8079-5d99ffd2c6f7",
      "DefaultValue": {
        "Type": "Scene",
        "Value": "Framefield.Core.Scene"
      },
      "MetaID": "79122951-7bc4-4c68-b085-866eab828248",
      "IsMultiInput": "False",
      "Relevance": "Required",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "StartPosition.X",
      "MetaInstanceID": "28de2665-7b25-4587-a489-e23366fab62d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "StartPosition.Y",
      "MetaInstanceID": "402497a3-e02e-4b4d-9952-36b8db23352d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "StartPosition.Z",
      "MetaInstanceID": "b6c9df5a-f7ff-49d8-b6c3-94f9564d86f4",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "StartTangent.X",
      "MetaInstanceID": "f508f309-35e5-45c3-b2c5-a36e98bbd2b7",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "StartTangent.Y",
      "MetaInstanceID": "4600b325-d5ed-4a4e-b3cc-1df7e125e15c",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "StartTangent.Z",
      "MetaInstanceID": "e855b376-f4e7-45e3-a691-3c8ece006f83",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "EndPosition.X",
      "MetaInstanceID": "5111af76-a0b8-47a4-9e36-2d793d6a3487",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "EndPosition.Y",
      "MetaInstanceID": "d92f080e-728a-405f-9e09-5fe6aa08f5d9",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "EndPosition.Z",
      "MetaInstanceID": "8a898a5d-561a-414a-96f9-a49abf9df096",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "EndTangent.X",
      "MetaInstanceID": "e937d9eb-a29c-4bab-9ccc-10afaae22045",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "EndTangent.Y",
      "MetaInstanceID": "a7fb925c-e40c-4342-a18c-6a46aefa029d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "EndTangent.Z",
      "MetaInstanceID": "a377605a-d701-4792-bd90-686edf33f83e",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Radius",
      "MetaInstanceID": "bf471b39-f9cf-4654-82d0-5e185727b6b4",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Move.CenterValue",
      "MetaInstanceID": "578aefa4-7155-456b-b30c-f60722edb4d2",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Move.CenterBias",
      "MetaInstanceID": "0636408a-1196-4b10-9bf3-c42fd5e7c0b3",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Move.EdgeValue",
      "MetaInstanceID": "01c5e092-4ba1-4d49-8715-c5acd93eb14d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Move.EdgeBias",
      "MetaInstanceID": "3606e223-001a-4aa1-91ce-e9a03e1186cb",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Converge.CenterValue",
      "MetaInstanceID": "00a69356-6fb3-43f5-90ad-13e07708c6f2",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Converge.CenterBias",
      "MetaInstanceID": "07b9f803-f91f-4fc7-9e8a-ec7c636c4705",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Converge.EdgeValue",
      "MetaInstanceID": "65472739-81c5-4cd4-8173-f773421737e2",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Converge.EdgeBias",
      "MetaInstanceID": "c5513ea6-f7d4-4adb-b19c-5f1d1ede7814",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Twirl.CenterValue",
      "MetaInstanceID": "c4ae4e74-f3f3-4f44-a9df-7a036aaf0c78",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Twirl.CenterBias",
      "MetaInstanceID": "055e5caf-10ab-4576-8c4a-c05cf4e641e5",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Twirl.EdgeValue",
      "MetaInstanceID": "3edc482d-ced2-4a77-8c4a-ec1966c5e862",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Twirl.EdgeBias",
      "MetaInstanceID": "20eb4583-fb02-4ed5-bc16-d9c66694b125",
      "DefaultValue": {
        "Type": "Float",
        "Value": "8"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Shrink.CenterValue",
      "MetaInstanceID": "27320790-f4ed-442e-b787-66579a8d425f",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Shrink.CenterBias",
      "MetaInstanceID": "1540deeb-aa70-42d4-ba78-26b1574cccd6",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Shrink.EdgeValue",
      "MetaInstanceID": "2b6ce9b9-372b-47e9-89e4-7bd5e9066b12",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Shrink.EdgeBias",
      "MetaInstanceID": "3b2f86cb-8807-4e7b-9389-b4e0b4886f73",
      "DefaultValue": {
        "Type": "Float",
        "Value": "8"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Scatter.CenterValue",
      "MetaInstanceID": "5af514b1-2ea8-4f63-8f43-91070ae78cdc",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Scatter.CenterBias",
      "MetaInstanceID": "17e69f41-8c5b-4397-a290-2741348a1125",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Scatter.EdgeValue",
      "MetaInstanceID": "b1dfba36-8af6-4fb4-a74e-509889a3865a",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Scatter.EdgeBias",
      "MetaInstanceID": "8dd53ffd-7665-4c85-9ccc-df1dde1f5602",
      "DefaultValue": {
        "Type": "Float",
        "Value": "8"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Distort.CenterValue",
      "MetaInstanceID": "9446e7ec-c1ff-44b1-91c6-717e7c63c515",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Distort.CenterBias",
      "MetaInstanceID": "f4f09cc5-8685-499d-a2b6-d7ae7a37ea96",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Distort.EdgeValue",
      "MetaInstanceID": "f7961041-f876-4d00-aa48-af92d7306f04",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Distort.EdgeBias",
      "MetaInstanceID": "ee65a491-407b-441d-82b0-d2b8c6885dff",
      "DefaultValue": {
        "Type": "Float",
        "Value": "8"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Rotate.CenterValue",
      "MetaInstanceID": "06152506-0d6e-444c-90a6-e2a8e7c4c900",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Rotate.CenterBias",
      "MetaInstanceID": "cd3d4ab3-8b05-426b-bb55-a1130e1e2bdd",
      "DefaultValue": {
        "Type": "Float",
        "Value": "4"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Rotate.EdgeValue",
      "MetaInstanceID": "c228c6c3-8216-415a-a419-71aedef13bf9",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Rotate.EdgeBias",
      "MetaInstanceID": "940703d7-4860-4c0a-97c2-453f15ee0213",
      "DefaultValue": {
        "Type": "Float",
        "Value": "8"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "CubeMap",
      "MetaInstanceID": "8eb0ffd6-e085-49f7-b3bb-61e2b3653d8a",
      "DefaultValue": {
        "Type": "Image",
        "Value": "Framefield.Core.Image"
      },
      "MetaID": "9848060d-fd84-45b0-b658-d0d531c61dab",
      "IsMultiInput": "False",
      "Relevance": "Relevant",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    }
  ],
  "Outputs": [
    {
      "Name": "Scene",
      "MetaInstanceID": "3948ddd7-6e39-4feb-b6be-c05e47c2cc54",
      "MetaID": "79122951-7bc4-4c68-b085-866eab828248"
    }
  ],
  "OperatorParts": [
    {
      "MetaInstanceID": "6b8fa3f6-fc28-405e-83c0-666d7cff2501",
      "MetaID": "c0519a20-0ba2-44ee-90b6-5eb532c03fb0",
      "Name": "TornadoScatterCubeMapFunc",
      "Version": "8f757836-6733-46ed-a45a-9beef18157b2",
      "Type": "Float",
      "IsMultiInput": "True",
      "Script": [
        "//>>> _using",
        "using System;",
        "using System.Collections.Generic;",
        "using System.Linq;",
        "using System.Text;",
        "using SharpDX;",
        "using SharpDX.Direct3D11;",
        "using SharpDX.Windows;",
        "//<<< _using",
        "using Framefield.Core.OperatorPartTraits;",
        "using Framefield.Core.Rendering;",
        "using Buffer = SharpDX.Direct3D11.Buffer;",
        "using SharpDX.Direct3D;",
        "",
        "namespace Framefield.Core.IDc0519a20_0ba2_44ee_90b6_5eb532c03fb0",
        "{",
        "    public class Class_TornadoScatterCubeMap : FXSourceCodeFunction, IFXSceneSourceCode, IMeshSupplier",
        "    {",
        "        //>>> _inputids",
        "        private enum InputId",
        "        {",
        "            Code = 0,",
        "            Scene = 1,",
        "            StartPositionX = 2,",
        "            StartPositionY = 3,",
        "            StartPositionZ = 4,",
        "            StartTangentX = 5,",
        "            StartTangentY = 6,",
        "            StartTangentZ = 7,",
        "            EndPositionX = 8,",
        "            EndPositionY = 9,",
        "            EndPositionZ = 10,",
        "            EndTangentX = 11,",
        "            EndTangentY = 12,",
        "            EndTangentZ = 13,",
        "            Radius = 14,",
        "            MoveCenterValue = 15,",
        "            MoveCenterBias = 16,",
        "            MoveEdgeValue = 17,",
        "            MoveEdgeBias = 18,",
        "            ConvergeCenterValue = 19,",
        "            ConvergeCenterBias = 20,",
        "            ConvergeEdgeValue = 21,",
        "            ConvergeEdgeBias = 22,",
        "            TwirlCenterValue = 23,",
        "            TwirlCenterBias = 24,",
        "            TwirlEdgeValue = 25,",
        "            TwirlEdgeBias = 26,",
        "            ShrinkCenterValue = 27,",
        "            ShrinkCenterBias = 28,",
        "            ShrinkEdgeValue = 29,",
        "            ShrinkEdgeBias = 30,",
        "            ScatterCenterValue = 31,",
        "            ScatterCenterBias = 32,",
        "            ScatterEdgeValue = 33,",
        "            ScatterEdgeBias = 34,",
        "            DistortCenterValue = 35,",
        "            DistortCenterBias = 36,",
        "            DistortEdgeValue = 37,",
        "            DistortEdgeBias = 38,",
        "            RotateCenterValue = 39,",
        "            RotateCenterBias = 40,",
        "            RotateEdgeValue = 41,",
        "            RotateEdgeBias = 42,",
        "            CubeMap = 43",
        "        }",
        "        //<<< _inputids",
        "",
        "        public Class_TornadoScatterCubeMap()",
        "        {",
        "            _meshCollector = new MeshCollector(this);",
        "        }",
        "",
        "        public override void Dispose() ",
        "        {",
        "            Utilities.DisposeObj(ref _mesh);",
        "            base.Dispose();",
        "        }",
        "",
        "        public void AddMeshesTo(ICollection<Mesh> meshes)",
        "        {",
        "            UpdateMesh(new OperatorPartContext(), OperatorPart.Connections);",
        "            if (_mesh != null)",
        "                meshes.Add(_mesh);",
        "        }",
        "",
        "        public override OperatorPartContext Eval(OperatorPartContext context, List<OperatorPart> inputs, int outputIdx)",
        "        {",
        "            try",
        "            {",
        "                UpdateMesh(context, inputs);",
        "",
        "                if (_mesh.Vertices != null)",
        "                {",
        "                    var CubeMap = inputs[(int)InputId.CubeMap].Eval(context).Image;",
        "                    using (var CubeMapView = new ShaderResourceView(context.D3DDevice, CubeMap))",
        "                    {",
        "                        _effect.GetVariableByName(\"CubeMap\").AsShaderResource().SetResource(CubeMapView);",
        "",
        "                        // render stream output to screen or whatever target is set",
        "                        context.Renderer.SetupEffect(context);",
        "                        context.Renderer.Render(_mesh, context);",
        "                    }",
        "                }",
        "            }",
        "            catch (Exception exception)",
        "            {",
        "                Logger.Error(this, \"Load Effect error: {0}\", exception.Message);",
        "            }",
        "",
        "            return context;",
        "        }",
        "",
        "        bool _firstEval = true;",
        "        private void UpdateMesh(OperatorPartContext context, List<OperatorPart> inputs)",
        "        {",
        "            if (_firstEval)",
        "            {",
        "                for (int i = 0; i < NumCodes(); ++i)",
        "                    Compile(i);",
        "                _firstEval = false;",
        "                Changed = true;",
        "            }",
        "",
        "            if (!Changed && _mesh.Vertices != null)",
        "                return;",
        "",
        "            //>>> __params",
        "            var Code = inputs[(int)InputId.Code].Eval(context).Text;",
        "            var Scene = inputs[(int)InputId.Scene];",
        "            var StartPositionX = inputs[(int)InputId.StartPositionX].Eval(context).Value;",
        "            var StartPositionY = inputs[(int)InputId.StartPositionY].Eval(context).Value;",
        "            var StartPositionZ = inputs[(int)InputId.StartPositionZ].Eval(context).Value;",
        "            var StartPosition = new Vector3(StartPositionX, StartPositionY, StartPositionZ);",
        "            var StartTangentX = inputs[(int)InputId.StartTangentX].Eval(context).Value;",
        "            var StartTangentY = inputs[(int)InputId.StartTangentY].Eval(context).Value;",
        "            var StartTangentZ = inputs[(int)InputId.StartTangentZ].Eval(context).Value;",
        "            var StartTangent = new Vector3(StartTangentX, StartTangentY, StartTangentZ);",
        "            var EndPositionX = inputs[(int)InputId.EndPositionX].Eval(context).Value;",
        "            var EndPositionY = inputs[(int)InputId.EndPositionY].Eval(context).Value;",
        "            var EndPositionZ = inputs[(int)InputId.EndPositionZ].Eval(context).Value;",
        "            var EndPosition = new Vector3(EndPositionX, EndPositionY, EndPositionZ);",
        "            var EndTangentX = inputs[(int)InputId.EndTangentX].Eval(context).Value;",
        "            var EndTangentY = inputs[(int)InputId.EndTangentY].Eval(context).Value;",
        "            var EndTangentZ = inputs[(int)InputId.EndTangentZ].Eval(context).Value;",
        "            var EndTangent = new Vector3(EndTangentX, EndTangentY, EndTangentZ);",
        "            var Radius = inputs[(int)InputId.Radius].Eval(context).Value;",
        "            var MoveCenterValue = inputs[(int)InputId.MoveCenterValue].Eval(context).Value;",
        "            var MoveCenterBias = inputs[(int)InputId.MoveCenterBias].Eval(context).Value;",
        "            var MoveEdgeValue = inputs[(int)InputId.MoveEdgeValue].Eval(context).Value;",
        "            var MoveEdgeBias = inputs[(int)InputId.MoveEdgeBias].Eval(context).Value;",
        "            var Move = new Vector4(MoveCenterValue, MoveCenterBias, MoveEdgeValue, MoveEdgeBias);",
        "            var ConvergeCenterValue = inputs[(int)InputId.ConvergeCenterValue].Eval(context).Value;",
        "            var ConvergeCenterBias = inputs[(int)InputId.ConvergeCenterBias].Eval(context).Value;",
        "            var ConvergeEdgeValue = inputs[(int)InputId.ConvergeEdgeValue].Eval(context).Value;",
        "            var ConvergeEdgeBias = inputs[(int)InputId.ConvergeEdgeBias].Eval(context).Value;",
        "            var Converge = new Vector4(ConvergeCenterValue, ConvergeCenterBias, ConvergeEdgeValue, ConvergeEdgeBias);",
        "            var TwirlCenterValue = inputs[(int)InputId.TwirlCenterValue].Eval(context).Value;",
        "            var TwirlCenterBias = inputs[(int)InputId.TwirlCenterBias].Eval(context).Value;",
        "            var TwirlEdgeValue = inputs[(int)InputId.TwirlEdgeValue].Eval(context).Value;",
        "            var TwirlEdgeBias = inputs[(int)InputId.TwirlEdgeBias].Eval(context).Value;",
        "            var Twirl = new Vector4(TwirlCenterValue, TwirlCenterBias, TwirlEdgeValue, TwirlEdgeBias);",
        "            var ShrinkCenterValue = inputs[(int)InputId.ShrinkCenterValue].Eval(context).Value;",
        "            var ShrinkCenterBias = inputs[(int)InputId.ShrinkCenterBias].Eval(context).Value;",
        "            var ShrinkEdgeValue = inputs[(int)InputId.ShrinkEdgeValue].Eval(context).Value;",
        "            var ShrinkEdgeBias = inputs[(int)InputId.ShrinkEdgeBias].Eval(context).Value;",
        "            var Shrink = new Vector4(ShrinkCenterValue, ShrinkCenterBias, ShrinkEdgeValue, ShrinkEdgeBias);",
        "            var ScatterCenterValue = inputs[(int)InputId.ScatterCenterValue].Eval(context).Value;",
        "            var ScatterCenterBias = inputs[(int)InputId.ScatterCenterBias].Eval(context).Value;",
        "            var ScatterEdgeValue = inputs[(int)InputId.ScatterEdgeValue].Eval(context).Value;",
        "            var ScatterEdgeBias = inputs[(int)InputId.ScatterEdgeBias].Eval(context).Value;",
        "            var Scatter = new Vector4(ScatterCenterValue, ScatterCenterBias, ScatterEdgeValue, ScatterEdgeBias);",
        "            var DistortCenterValue = inputs[(int)InputId.DistortCenterValue].Eval(context).Value;",
        "            var DistortCenterBias = inputs[(int)InputId.DistortCenterBias].Eval(context).Value;",
        "            var DistortEdgeValue = inputs[(int)InputId.DistortEdgeValue].Eval(context).Value;",
        "            var DistortEdgeBias = inputs[(int)InputId.DistortEdgeBias].Eval(context).Value;",
        "            var Distort = new Vector4(DistortCenterValue, DistortCenterBias, DistortEdgeValue, DistortEdgeBias);",
        "            var RotateCenterValue = inputs[(int)InputId.RotateCenterValue].Eval(context).Value;",
        "            var RotateCenterBias = inputs[(int)InputId.RotateCenterBias].Eval(context).Value;",
        "            var RotateEdgeValue = inputs[(int)InputId.RotateEdgeValue].Eval(context).Value;",
        "            var RotateEdgeBias = inputs[(int)InputId.RotateEdgeBias].Eval(context).Value;",
        "            var Rotate = new Vector4(RotateCenterValue, RotateCenterBias, RotateEdgeValue, RotateEdgeBias);",
        "            //<<< __params",
        "",
        "            if (Scene.Func.Changed || _mesh.Vertices == null)",
        "            {",
        "                //Logger.Info(this, \"collect meshes\");",
        "                _meshCollector.Collect(Scene);",
        "                Scene.Func.Changed = false;",
        "            }",
        "",
        "            var inputMesh = _meshCollector.FirstMeshOrDefault;",
        "            if (inputMesh == null)",
        "                return;",
        "",
        "            _mesh.AttributesSize = inputMesh.AttributesSize;",
        "            _mesh.NumTriangles = inputMesh.NumTriangles;",
        "            _mesh.InputElements = inputMesh.InputElements;",
        "            if (_mesh.Vertices == null || _mesh.Vertices.Description.SizeInBytes != inputMesh.Vertices.Description.SizeInBytes)",
        "            {",
        "                if (_mesh.Vertices != null)",
        "                    _mesh.Vertices.Dispose();",
        "",
        "                _mesh.Vertices = new Buffer(D3DDevice.Device, new BufferDescription()",
        "                                                                    {",
        "                                                                        BindFlags = BindFlags.StreamOutput | BindFlags.VertexBuffer,",
        "                                                                        CpuAccessFlags = CpuAccessFlags.None,",
        "                                                                        OptionFlags = ResourceOptionFlags.None,",
        "                                                                        SizeInBytes = _mesh.NumTriangles*inputMesh.AttributesSize*3,",
        "                                                                        Usage = ResourceUsage.Default",
        "                                                                    });",
        "            }",
        "            ",
        "",
        "                _effect.GetVariableByName(\"Radius\").AsScalar().Set(Radius);",
        "                _effect.GetVariableByName(\"StartPosition\").AsVector().Set(new Vector3(StartPositionX, StartPositionY, StartPositionZ));",
        "                _effect.GetVariableByName(\"StartTangent\").AsVector().Set(new Vector3(StartTangentX, StartTangentY, StartTangentZ));",
        "                _effect.GetVariableByName(\"EndPosition\").AsVector().Set(new Vector3(EndPositionX, EndPositionY, EndPositionZ));",
        "                _effect.GetVariableByName(\"EndTangent\").AsVector().Set(new Vector3(EndTangentX, EndTangentY, EndTangentZ));",
        "    ",
        "                _effect.GetVariableByName(\"Move\").AsVector().Set(new Vector4(MoveCenterValue, MoveCenterBias, MoveEdgeValue, MoveEdgeBias));",
        "                _effect.GetVariableByName(\"Converge\").AsVector().Set(new Vector4(ConvergeCenterValue, ConvergeCenterBias, ConvergeEdgeValue, ConvergeEdgeBias));",
        "                _effect.GetVariableByName(\"Twirl\").AsVector().Set(new Vector4(TwirlCenterValue, TwirlCenterBias, TwirlEdgeValue, TwirlEdgeBias));",
        "                ",
        "                ",
        "                _effect.GetVariableByName(\"Shrink\").AsVector().Set(new Vector4(ShrinkCenterValue, ShrinkCenterBias, ShrinkEdgeValue, ShrinkEdgeBias));",
        "                _effect.GetVariableByName(\"Scatter\").AsVector().Set(new Vector4(ScatterCenterValue, ScatterCenterBias, ScatterEdgeValue, ScatterEdgeBias));",
        "                _effect.GetVariableByName(\"Distort\").AsVector().Set(new Vector4(DistortCenterValue, DistortCenterBias, DistortEdgeValue, DistortEdgeBias));",
        "                _effect.GetVariableByName(\"Rotate\").AsVector().Set(new Vector4(RotateCenterValue, RotateCenterBias, RotateEdgeValue, RotateEdgeBias));",
        "                ",
        "                ",
        "                //_effect.GetVariableByName(\"Translate\").AsVector().Set(new Vector3(TranslateX, TranslateY, TranslateZ));",
        "                //_effect.GetVariableByName(\"Range\").AsVector().Set(new Vector2(RangeSize, RangeFallOff));",
        "                //_effect.GetVariableByName(\"Push\").AsScalar().Set(Push);",
        "                //_effect.GetVariableByName(\"Shrink\").AsScalar().Set(Shrink);",
        "                //_effect.GetVariableByName(\"Scatter\").AsScalar().Set(Scatter);",
        "                //_effect.GetVariableByName(\"Distort\").AsScalar().Set(Distort);",
        "                //_effect.GetVariableByName(\"Rotate\").AsScalar().Set(Rotate);",
        "    ",
        "                context.D3DDevice.ImmediateContext.StreamOutput.SetTargets(new [] { new StreamOutputBufferBinding(_mesh.Vertices, 0) });",
        "                context.D3DDevice.ImmediateContext.OutputMerger.DepthStencilState = new DepthStencilState(context.D3DDevice,",
        "                                                                                                            new DepthStencilStateDescription()",
        "                                                                                                                {",
        "                                                                                                                    IsDepthEnabled = false,",
        "                                                                                                                    IsStencilEnabled = false",
        "                                                                                                                });",
        "                context.D3DDevice.ImmediateContext.InputAssembler.InputLayout = context.InputLayout;",
        "                context.D3DDevice.ImmediateContext.InputAssembler.PrimitiveTopology = PrimitiveTopology.TriangleList;",
        "                context.D3DDevice.ImmediateContext.InputAssembler.SetVertexBuffers(0, new VertexBufferBinding(inputMesh.Vertices, inputMesh.AttributesSize, 0));",
        "                var technique = _effect.GetTechniqueByIndex(0);",
        "                technique.GetPassByIndex(0).Apply(context.D3DDevice.ImmediateContext);",
        "                context.D3DDevice.ImmediateContext.Draw(_mesh.NumTriangles*3, 0);",
        "                context.D3DDevice.ImmediateContext.StreamOutput.SetTargets(new [] { new StreamOutputBufferBinding(null, 0) });",
        "            ",
        "",
        "            Changed = false;",
        "        }",
        "",
        "        private Mesh _mesh = new Mesh();",
        "        private MeshCollector _meshCollector;",
        "    }",
        "}",
        "",
        "",
        ""
      ],
      "AdditionalAssemblies": []
    }
  ],
  "Operators": [],
  "Connections": [
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "3948ddd7-6e39-4feb-b6be-c05e47c2cc54"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "2e5be305-214f-4a56-a475-31479f514ebd",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "a8ab677f-1795-474e-8079-5d99ffd2c6f7",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "28de2665-7b25-4587-a489-e23366fab62d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "402497a3-e02e-4b4d-9952-36b8db23352d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "b6c9df5a-f7ff-49d8-b6c3-94f9564d86f4",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "f508f309-35e5-45c3-b2c5-a36e98bbd2b7",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "4600b325-d5ed-4a4e-b3cc-1df7e125e15c",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e855b376-f4e7-45e3-a691-3c8ece006f83",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "5111af76-a0b8-47a4-9e36-2d793d6a3487",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "d92f080e-728a-405f-9e09-5fe6aa08f5d9",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "8a898a5d-561a-414a-96f9-a49abf9df096",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e937d9eb-a29c-4bab-9ccc-10afaae22045",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "a7fb925c-e40c-4342-a18c-6a46aefa029d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "a377605a-d701-4792-bd90-686edf33f83e",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "bf471b39-f9cf-4654-82d0-5e185727b6b4",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "578aefa4-7155-456b-b30c-f60722edb4d2",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "0636408a-1196-4b10-9bf3-c42fd5e7c0b3",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "01c5e092-4ba1-4d49-8715-c5acd93eb14d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "3606e223-001a-4aa1-91ce-e9a03e1186cb",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "00a69356-6fb3-43f5-90ad-13e07708c6f2",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "07b9f803-f91f-4fc7-9e8a-ec7c636c4705",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "65472739-81c5-4cd4-8173-f773421737e2",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "c5513ea6-f7d4-4adb-b19c-5f1d1ede7814",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "c4ae4e74-f3f3-4f44-a9df-7a036aaf0c78",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "055e5caf-10ab-4576-8c4a-c05cf4e641e5",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "3edc482d-ced2-4a77-8c4a-ec1966c5e862",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "20eb4583-fb02-4ed5-bc16-d9c66694b125",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "27320790-f4ed-442e-b787-66579a8d425f",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "1540deeb-aa70-42d4-ba78-26b1574cccd6",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "2b6ce9b9-372b-47e9-89e4-7bd5e9066b12",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "3b2f86cb-8807-4e7b-9389-b4e0b4886f73",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "5af514b1-2ea8-4f63-8f43-91070ae78cdc",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "17e69f41-8c5b-4397-a290-2741348a1125",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "b1dfba36-8af6-4fb4-a74e-509889a3865a",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "8dd53ffd-7665-4c85-9ccc-df1dde1f5602",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "9446e7ec-c1ff-44b1-91c6-717e7c63c515",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "f4f09cc5-8685-499d-a2b6-d7ae7a37ea96",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "f7961041-f876-4d00-aa48-af92d7306f04",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "ee65a491-407b-441d-82b0-d2b8c6885dff",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "06152506-0d6e-444c-90a6-e2a8e7c4c900",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "cd3d4ab3-8b05-426b-bb55-a1130e1e2bdd",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "c228c6c3-8216-415a-a419-71aedef13bf9",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "940703d7-4860-4c0a-97c2-453f15ee0213",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "8eb0ffd6-e085-49f7-b3bb-61e2b3653d8a",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "6b8fa3f6-fc28-405e-83c0-666d7cff2501"
    }
  ]
}